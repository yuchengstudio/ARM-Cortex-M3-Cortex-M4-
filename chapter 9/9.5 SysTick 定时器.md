
### 9.5.3 使用Systick定时器
若只想产生周期性的Sys Tick中断，最简单的方法就是使用CMSIS-Core函数SysTick_Config:

在使用Atmel studio环境的时候可以直接使用该配置函数，因为START生成的工程已经默认包含了core_cm4.h这个头文件。
C:\Program Files (x86)\Atmel\Studio\7.0\Packs\arm\cmsis\5.0.1\CMSIS\Include\core_cm4.h

```
  //比如要在30MHz的时钟频率下产生1Khz的Systick中断，则可以如下配置
	unsigned int desired_clock = 1000;                
	SysTick_Config(SystemCoreClock/desired_clock);
```

![images](https://github.com/yuchengstudio/ARM-Cortex-M3-Cortex-M4-/blob/master/chapter%209/pictures/Systick001.jpg)
![images](https://github.com/yuchengstudio/ARM-Cortex-M3-Cortex-M4-/blob/master/chapter%209/pictures/Systick002.jpg)



```
许多情况下，可能会使用systick但又不想使能systick中断，那么就不能使用SysTick_Config（）函数，此时需要直接操作SysTick寄存器，
推荐使用如下流程
```

 | 步骤 | 操作说明 | 备注 |
 | :------ | :----- | :---- |
 |1|将0写入SysTick->CTRL 禁止SysTick定时器。这个操作是可选的。若重用了其他代码，则由于SysTick之前可能已经使能过了，因此本操作是推荐使用的。||
 |2|将新的重加载值写入SysTick->LOAD,重新加载值应该是周期数减1。||
 |3|将任何数值写入SysTick当前值寄存器SysTick->VAL,该寄存器会被清0。||
 |4|写入SysTick控制和状态寄存器SysTick->CTRL 启动SysTick定时器。||
 

![images](https://github.com/yuchengstudio/ARM-Cortex-M3-Cortex-M4-/blob/master/chapter%209/pictures/Systick003.jpg)

    参考文献
 | 名称 | 链接 | 说明 |
 | :------ | -----: | :----: | 
 | Systick中断函数SysTick_Handler的实现引发的思考 | https://blog.csdn.net/u011401496/article/details/42882553 | 理解SysTick_Handler | 





